---
title: "Verifica dell’identità dell’utente"
description: Guida alla configurazione e all’implementazione della verifica dell’identità dell’utente nel tuo chatbot innoChat, inclusa la validazione dei token, la configurazione degli endpoint API, l’archiviazione dei dati e i metodi di integrazione.
---

Questa guida ti accompagna nell’implementazione di un sistema di autenticazione robusto all’interno del tuo chatbot.

## Passaggio 1: Attivare l’identità utente

Per avviare il processo di verifica dell’identità, devi prima attivare questa funzione nelle impostazioni del chatbot.  
Puoi farlo nella sezione **"User Identity Verification"**.

Una volta attivata, il chatbot sarà in grado di verificare automaticamente i token degli utenti.  
Ciò significa che ogni interazione viene controllata tramite il token di identità.

<Frame>
  <img src="/images/user-identity-1.png" />
</Frame>

## Passaggio 2: Endpoint API

### Configurazione dell’endpoint API

È necessario configurare un endpoint API per la verifica dei token.  
Questo endpoint deve accettare richieste **POST**.

1. **Specificare l’endpoint API:**  
   Inserisci l’URL dell’endpoint nelle impostazioni del chatbot.

2. **Configurare per richieste POST:**  
   Assicurati che l’endpoint possa elaborare richieste POST, poiché INNOCHAT invia i dati tramite questo metodo.

<Frame>
  <img src="/images/user-identity-2.png" />
</Frame>

### Flusso del processo di verifica

Quando viene avviata una chat, avviene quanto segue:

1. **Invio del token:**  
   INNOCHAT invia automaticamente una richiesta contenente il token dell’utente.

2. **Elaborazione della richiesta:**  
   L’endpoint verifica la validità del token.

3. **Gestione del risultato:**

   - **Verifica riuscita:**  
     L’utente può continuare la conversazione.
   - **Verifica non riuscita:**  
     In caso di errore, l’utente viene reindirizzato a una schermata di errore.

## Passaggio 3: Archiviazione dei dati utente

Per estendere la verifica e tenere traccia delle interazioni,  
puoi salvare i dati delle risposte di verifica riuscite.

<Frame>
  <img src="/images/user-identity-3.png" />
</Frame>

Ogni autenticazione riuscita viene memorizzata insieme ai dati identificativi.

I dati sono associati alle conversazioni corrispondenti.

<Warning>
  **Sono accettati solo dati JSON validi** — Assicurati che i dati siano in formato JSON corretto.  
  I dati non validi vengono ignorati automaticamente.
</Warning>

Esempio di JSON valido:

```json
{
  "userId": "12345",
  "userName": "JohnDoe",
  "email": "johndoe@example.com",
  "verified": true,
  "roles": ["user", "admin"],
  "profile": {
    "firstName": "John",
    "lastName": "Doe",
    "age": 30
  }
}

```

## Passaggio 4: Inserire il token nel chatbot INNOCHAT
### Widget di chat

Nel codice del sito troverai l’oggetto GPTTConfig.
Imposta la proprietà token con il tuo valore personalizzato. Esempio:

```html
<script>
  window.GPTTConfig = {
      uuid: "15b1f07cd591476c94c210779a6c3c19",
      token: <"Custom token">
  }
</script>
<script src="https://app.innochat.ch/widget-asset.min.js" defer></script>

```
Puoi anche aggiornare GPTTConfig tramite JavaScript, utile per token dinamici:

```javascript
  window.GPTTConfig.token = "Custom token";

```
Ogni modifica del token attiva una nuova autenticazione.

#### Iframe

Puoi passare il token tramite iframe aggiungendolo all’URL:

```html
<iframe
  src="https://app.innochat.ch/widget/162223v?token=<custom_token>"
  width="100%"
  height="500px"
  frameborder="0"
></iframe>
```
Per modificare il token, aggiorna semplicemente l’attributo src.

Dopo l’aggiornamento, l’iframe viene ricaricato e utilizza il nuovo token.

Congratulazioni! Hai completato con successo la configurazione della verifica dell’identità per il tuo chatbot INNOCHAT.
Seguendo questi passaggi, hai implementato un sistema di autenticazione sicuro e affidabile, garantendo una user experience protetta.