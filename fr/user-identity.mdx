---
title: "Vérification de l’identité des utilisateurs"
description: Guide pour configurer et implémenter la vérification de l’identité des utilisateurs dans votre chatbot innoChat, incluant la validation des tokens, la configuration des endpoints API, le stockage des données et les méthodes d’intégration.
---

Ce guide vous accompagne dans l’implémentation d’un système d’authentification robuste au sein de votre chatbot.

## Étape 1 : Activer l’identité utilisateur

Pour démarrer le processus de vérification de l’identité des utilisateurs, vous devez d’abord activer cette fonctionnalité dans les paramètres de votre chatbot.  
Cela peut être fait dans la section **"User Identity Verification"** des paramètres du chatbot.

Une fois la vérification de l’identité activée, votre chatbot est capable de vérifier automatiquement les tokens des utilisateurs.  
Cela signifie qu’à chaque tentative d’interaction avec le chatbot, le token d’identité de l’utilisateur est vérifié.

<Frame>
  <img src="/images/user-identity-1.png" />
</Frame>

## Étape 2 : Endpoint API

### Configuration de l’endpoint API

Il est nécessaire de configurer un endpoint API chargé de vérifier les tokens des utilisateurs.  
Cet endpoint doit être configuré pour accepter les requêtes **POST**.

1. **Définir l’endpoint API :**  
   Indiquez l’URL de l’endpoint API dans les paramètres de votre chatbot. Il s’agit de l’adresse du serveur vers laquelle les requêtes de vérification sont envoyées.

2. **Configurer pour les requêtes POST :**  
   Assurez-vous que votre endpoint API est configuré pour traiter les requêtes POST.  
   Ceci est essentiel, car INNOCHAT envoie les données des tokens via des requêtes POST.

<Frame>
  <img src="/images/user-identity-2.png" />
</Frame>

### Déroulement du processus de vérification

Voici ce qui se passe lorsqu’un chat est démarré :

1. **Transmission du token :**  
   Chaque fois qu’un chat est affiché, INNOCHAT envoie automatiquement une requête de vérification à l’endpoint API spécifié.  
   Cette requête contient le token de l’utilisateur.

2. **Traitement de la requête :**  
   Votre endpoint API doit traiter cette requête et vérifier la validité du token.

3. **Gestion du résultat :**

   - **Vérification réussie :**  
     Si le token est validé avec succès, l’utilisateur authentifié peut poursuivre la conversation.
   - **Échec de la vérification :**  
     Si l’API renvoie une erreur (indiquant un échec), l’authentification est considérée comme non valide.  
     Dans ce cas, l’utilisateur est redirigé vers un écran d’erreur.

## Étape 3 : Stockage des données utilisateur

Pour étendre la vérification de l’identité et conserver des traces des interactions,  
vous pouvez enregistrer les données issues des réponses de vérification réussies.

<Frame>
  <img src="/images/user-identity-3.png" />
</Frame>

Chaque fois qu’un utilisateur est authentifié avec succès, la réponse du processus de vérification (généralement avec des données d’identification) est enregistrée.

Ces données ne sont pas stockées isolément, mais associées aux conversations correspondantes.

<Warning>
  **Seules les données JSON valides sont acceptées** — Assurez-vous que toutes les données destinées à être enregistrées sont au format JSON valide.  
  Les données non valides ou non JSON sont automatiquement ignorées et ne sont pas enregistrées dans l’historique des conversations.
</Warning>

Exemple de JSON valide :

```json
{
  "userId": "12345",
  "userName": "JohnDoe",
  "email": "johndoe@example.com",
  "verified": true,
  "roles": ["user", "admin"],
  "profile": {
    "firstName": "John",
    "lastName": "Doe",
    "age": 30
  }
}

```

## Étape 4 : Intégrer votre token dans le chatbot INNOCHAT
### Widget de chat

Dans le script de votre site web où le chatbot est intégré, vous trouverez l’objet GPTTConfig.
Vous devez y définir la propriété token avec votre token personnalisé. Exemple :

```html
<script>
  window.GPTTConfig = {
      uuid: "15b1f07cd591476c94c210779a6c3c19",
      token: <"Custom token">
  }
</script>
<script src="https://app.innochat.ch/widget-asset.min.js" defer></script>

```
Vous pouvez également mettre à jour l’objet GPTTConfig directement via JavaScript.
Cette méthode est utile si vous devez définir dynamiquement le token selon les interactions utilisateur. Exemple :
```javascript
  window.GPTTConfig.token = "Custom token";

```
Dès qu’une modification de la propriété token est détectée, le système tente d’authentifier l’utilisateur avec la nouvelle valeur.

#### Iframe

Vous pouvez transmettre le token directement via un iframe en l’ajoutant comme paramètre dans l’URL.
Ajoutez le paramètre token à l’attribut src et remplacez custom_token par la valeur réelle :

```html
<iframe
  src="https://app.innochat.ch/widget/162223v?token=<custom_token>"
  width="100%"
  height="500px"
  frameborder="0"
></iframe>
```
Si le token doit être modifié, mettez simplement à jour l’attribut src.

Après la mise à jour, l’iframe est rechargé et le nouveau token est utilisé pour l’authentification.

Félicitations ! Vous avez configuré avec succès la vérification de l’identité utilisateur pour votre chatbot INNOCHAT.
En suivant ces étapes, vous avez mis en place une méthode robuste et sécurisée d’authentification, garantissant une expérience utilisateur fiable et protégée.